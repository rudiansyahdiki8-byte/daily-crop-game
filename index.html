<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Daily Crop - Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* CSS untuk Animasi Kebun */
.dirt-patch {
    background: #2d1b0d !important;
    position: relative;
    overflow: hidden;
    border: 2px solid rgba(255,255,255,0.05);
}

@keyframes growUp {
    0% { transform: scale(0.5); opacity: 0.5; }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes swayAndGlow {
    0%, 100% { transform: scale(1) rotate(-5deg); filter: drop-shadow(0 0 5px gold); }
    50% { transform: scale(1.1) rotate(5deg); filter: drop-shadow(0 0 15px gold); }
}

.ready-anim {
    display: flex !important;
    animation: swayAndGlow 1.5s ease-in-out infinite !important;
    z-index: 99;
    cursor: pointer;
}

.seed-anim {
    display: inline-block;
    animation: growUp 2s ease-out;
}
        body { background-color: #05080f; color: #f8fafc; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .btn-press:active { transform: scale(0.95); }
        
        /* Bingkai Modal */
        #modal-overlay { display: none; position: fixed; inset: 0; z-index: 200; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); align-items: flex-end; justify-content: center; }
        .modal-container { width: 100%; max-width: 500px; background: #0a0f1a; border-radius: 2.5rem 2.5rem 0 0; padding: 2rem; border: 1px solid rgba(255,255,255,0.1); border-top: 4px solid #10b981; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</head>
<body class="pb-40">

    <header class="p-5 flex justify-between items-center sticky top-0 bg-[#05080f]/90 backdrop-blur-xl z-50 border-b border-white/5">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-emerald-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30">
                <i class="fas fa-leaf text-black text-2xl"></i>
            </div>
            <div>
                <h1 class="text-xl font-black tracking-tight text-white leading-none">Daily Crop</h1>
                <p id="main-balance" class="text-[10px] font-bold text-emerald-500 mt-1 italic font-mono uppercase">0 PTS</p>
            </div>
        </div>
        <button onclick="openPopup('Withdraw')" class="w-14 h-14 glass rounded-2xl flex items-center justify-center text-blue-400 border-blue-500/30 shadow-lg btn-press">
            <i class="fas fa-wallet text-2xl"></i>
        </button>
    </header>

    <main id="app-content" class="px-6 space-y-6 mt-4">
        </main>

    <div class="fixed bottom-32 right-6 flex flex-col gap-3 z-[60]">
        <button onclick="openPopup('Kontak')" class="w-12 h-12 glass rounded-full flex items-center justify-center text-sky-400 border-sky-500/30 btn-press"><i class="fab fa-telegram-plane"></i></button>
        <button onclick="openPopup('TermsOfUse')" class="w-12 h-12 glass rounded-full flex items-center justify-center text-yellow-500 border-yellow-500/30 btn-press"><i class="fas fa-book-open text-xs"></i></button>
        <button onclick="openPopup('PrivacyPolicy')" class="w-12 h-12 glass rounded-full flex items-center justify-center text-emerald-500 border-emerald-500/30 btn-press"><i class="fas fa-user-shield text-xs"></i></button>
    </div>

    <nav class="fixed bottom-6 left-6 right-6 h-20 glass rounded-[2.5rem] flex justify-around items-center z-[150] border-white/10 shadow-2xl">
        <button onclick="loadPage('Dashboard', this)" class="nav-link flex flex-col items-center gap-1 text-emerald-500">
            <i class="fas fa-th-large text-lg"></i>
            <span class="text-[7px] font-black uppercase">Home</span>
        </button>
        <button onclick="loadPage('FarmingHouse', this)" class="nav-link flex flex-col items-center gap-1 text-gray-500">
            <i class="fas fa-house-chimney-window text-lg"></i>
            <span class="text-[7px] font-black uppercase">Farm</span>
        </button>
        <button onclick="loadPage('Shop', this)" class="nav-link flex flex-col items-center gap-1 text-gray-500">
            <i class="fas fa-store text-lg"></i>
            <span class="text-[7px] font-black uppercase">Shop</span>
        </button>
        <button onclick="loadPage('Plan', this)" class="nav-link flex flex-col items-center gap-1 text-gray-500">
            <i class="fas fa-crown text-lg"></i>
            <span class="text-[7px] font-black uppercase">Plan</span>
        </button>
        <button onclick="loadPage('Affiliate', this)" class="nav-link flex flex-col items-center gap-1 text-gray-500">
            <i class="fas fa-users-rays text-lg"></i>
            <span class="text-[7px] font-black uppercase">Friends</span>
        </button>
    </nav>

    <div id="modal-overlay" onclick="closePopup()">
        <div id="modal-content" class="modal-container" onclick="event.stopPropagation()"></div>
    </div>

    <script>
        // Database Tanaman
const cropInfo = [
    { name: 'Sawi', seed: 'üå±', ready: 'ü•¨', count: 9 },
    { name: 'Wortel', seed: 'üå±', ready: 'ü•ï', count: 9 },
    { name: 'Jagung', seed: 'üå±', ready: 'üåΩ', count: 6 },
    { name: 'Cabai', seed: 'üå±', ready: 'üå∂Ô∏è', count: 9 }
];

let plotReady = [false, false, false, false];

// Fungsi Memulai Pertumbuhan
function startGrowing(id) {
    const garden = document.getElementById(`garden-${id}`);
    const popup = document.getElementById(`pop-${id}`);
    if(!garden || !popup) return; // Mencegah error jika belum di halaman Farm

    plotReady[id] = false;
    popup.classList.add('hidden');
    garden.style.display = 'grid';
    garden.innerHTML = '';

    for (let i = 0; i < cropInfo[id].count; i++) {
        const s = document.createElement('span');
        s.innerText = cropInfo[id].seed;
        s.className = 'seed-anim text-[12px]';
        garden.appendChild(s);
    }

    setTimeout(() => {
        plotReady[id] = true;
        garden.style.display = 'none';
        popup.classList.remove('hidden');
    }, 5000); // 5 detik untuk tes
}

// Fungsi Harvest
function harvestPlot(id) {
    if (!plotReady[id]) return;
    warehouse += 1;
    updateMainUI();
    startGrowing(id);
}

// Tambahkan startGrowing ke dalam fungsi loadPage agar otomatis jalan saat buka Farm
// Cari fungsi loadPage kamu di index.html dan tambahkan baris init di bawahnya:
// if(page === 'FarmingHouse') { setTimeout(() => { for(let i=0; i<4; i++) startGrowing(i); }, 100); }
        
        // DATA UTAMA (Logic Jembatan)
        let coins = 0;
        let warehouse = 0;

        async function loadPage(pageName, btn) {
            try {
                const res = await fetch(`${pageName}.html`);
                const html = await res.text();
                document.getElementById('app-content').innerHTML = html;
                
                // Urusan warna Navbar
                document.querySelectorAll('.nav-link').forEach(n => n.classList.replace('text-emerald-500', 'text-gray-500'));
                btn.classList.replace('text-gray-500', 'text-emerald-500');
                
                // Update UI setelah halaman dimuat
                if(window.initPage) initPage();
                updateMainUI();
            } catch (e) { console.error("Gagal ambil file:", pageName); }
        }

        async function openPopup(pageName) {
            try {
                const res = await fetch(`${pageName}.html`);
                const html = await res.text();
                document.getElementById('modal-content').innerHTML = html;
                document.getElementById('modal-overlay').style.display = 'flex';
            } catch (e) { console.error("Gagal ambil popup:", pageName); }
        }

        function closePopup() { document.getElementById('modal-overlay').style.display = 'none'; }
        
        function updateMainUI() {
            document.getElementById('main-balance').innerText = coins.toLocaleString() + " PTS";
        }

        // Buka dashboard pertama kali
        window.onload = () => loadPage('Dashboard', document.querySelector('.nav-link'));
    </script>
</body>
</html>
