<div class="space-y-6">
    <div class="flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center text-blue-400">
                <i class="fas fa-wallet text-lg"></i>
            </div>
            <h2 class="text-xl font-black italic tracking-tight">WITHDRAWAL</h2>
        </div>
        <button onclick="closePopup()" class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-white transition-colors">
            <i class="fas fa-times text-xl"></i>
        </button>
    </div>

    <div class="bg-white/5 p-4 rounded-2xl border border-white/5 flex justify-between items-center">
        <p class="text-[10px] font-black text-gray-500 uppercase">Available Balance</p>
        <p class="text-lg font-black text-emerald-500" id="wd-balance-display">0 PTS</p>
    </div>

    <div class="space-y-4">
        <div>
            <label class="text-[8px] font-black text-gray-500 uppercase ml-2 mb-2 block tracking-widest">Select Method</label>
            <select class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl text-xs font-bold text-white outline-none appearance-none focus:border-blue-500/50 transition-all">
                <option value="ton">TON (The Open Network)</option>
                <option value="dana">DANA / E-Wallet</option>
                <option value="usdt">USDT (BEP-20)</option>
            </select>
        </div>

        <div>
            <label class="text-[8px] font-black text-gray-500 uppercase ml-2 mb-2 block tracking-widest">Wallet Address / No. HP</label>
            <input type="text" id="wd-address" placeholder="Enter your address..." 
                class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl text-xs font-bold text-white outline-none focus:border-blue-500/50 transition-all">
        </div>

        <div>
            <label class="text-[8px] font-black text-gray-500 uppercase ml-2 mb-2 block tracking-widest">Amount to Withdraw</label>
            <input type="number" id="wd-amount" placeholder="Min. 50,000 PTS" 
                class="w-full bg-black/40 border border-white/10 p-4 rounded-2xl text-xs font-black text-emerald-500 outline-none focus:border-blue-500/50 transition-all">
        </div>
    </div>

    <div class="px-2 space-y-1">
        <div class="flex justify-between text-[8px] font-bold text-gray-600 uppercase">
            <span>Transaction Fee:</span>
            <span>2%</span>
        </div>
        <div class="flex justify-between text-[8px] font-bold text-gray-600 uppercase">
            <span>Processing Time:</span>
            <span>Up to 24 Hours</span>
        </div>
    </div>

    <button onclick="processWithdraw()" class="w-full bg-blue-600 hover:bg-blue-500 text-black py-5 rounded-3xl font-black text-[11px] uppercase tracking-[0.2em] shadow-lg shadow-blue-500/20 btn-press transition-all">
        Confirm Withdrawal
    </button>
</div>

<script>
    // FUNGSI INISIALISASI POPUP
    window.initPopup = function() {
        // Ambil saldo koin dari variabel global di Main.html
        document.getElementById('wd-balance-display').innerText = coins.toLocaleString() + " PTS";
    };

    function processWithdraw() {
        const amount = parseInt(document.getElementById('wd-amount').value);
        const address = document.getElementById('wd-address').value;

        if (!amount || amount < 50000) {
            alert("Minimal penarikan adalah 50.000 PTS!");
            return;
        }

        if (!address) {
            alert("Silakan masukkan alamat wallet atau nomor HP!");
            return;
        }

        if (amount > coins) {
            alert("Saldo PTS kamu tidak mencukupi!");
            return;
        }

        // Logic Pengurangan Saldo
        coins -= amount;
        
        // Update tampilan di Header Main.html
        updateMainUI();
        
        // Feedback User
        alert("Permintaan Withdraw sebesar " + amount.toLocaleString() + " PTS berhasil dikirim! Silakan tunggu konfirmasi admin.");
        
        // Tutup Modal
        closePopup();
    }

    // Jalankan init setiap popup dibuka
    initPopup();
</script>